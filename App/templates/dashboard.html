{% extends 'layout.html' %}
{% block content %}
<div class="dashboard-wrapper">

  <h1>Welcome to the UWI Stat Portal</h1>
  <p>Explore a unified platform for uploading, validating, and reporting data across UWI campuses.</p>

  <!-- Existing Cards -->
  <div class="card">
    <h2>ðŸ“Š Statistical Digests</h2>
    <ul>
      <li><a href="#">2013/14 to 2017/18</a></li>
      <li><a href="#">2012/13 to 2016/17</a></li>
      <li><a href="#">2011/12 to 2015/16</a></li>
    </ul>
  </div>

  <div class="card">
    <h2>ðŸ“Ž Important Guide</h2>
    <p>
      Use the template below to upload your data.<br>
      Click to download:
    </p>
    <div style="display: flex; gap: 1rem;">
      <a href="{{ url_for('static', filename='guides/data_upload_guide.pdf') }}" download>
        <img src="{{ url_for('static', filename='icons/pdf_icon.png') }}" alt="PDF" height="50">
      </a>
      <a href="{{ url_for('static', filename='guides/upload_template.xlsx') }}" download>
        <img src="{{ url_for('static', filename='icons/excel_icon.png') }}" alt="Excel" height="50">
      </a>
    </div>
  </div>

  <!-- New Demo Charts -->
  <div class="card" style="margin-top: 2rem;">
    <h2>Enrollment by Faculty</h2>
    <canvas id="enrollmentChart" width="400" height="200"></canvas>
  </div>

  <div class="card" style="margin-top: 2rem;">
    <h2>GPA Averages by Program</h2>
    <canvas id="gpaChart" width="400" height="200"></canvas>
  </div>

  <div class="card" style="margin-top: 2rem;">
    <h2>Scholarships Awarded Over Years</h2>
    <canvas id="scholarshipChart" width="400" height="200"></canvas>
  </div>

</div>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // 1. Enrollment by Faculty (Bar)
  new Chart(document.getElementById('enrollmentChart'), {
    type: 'bar',
    data: {
      labels: ['Science', 'Engineering', 'Humanities', 'Business', 'Law'],
      datasets: [{
        label: 'Students Enrolled',
        data: [1200, 950, 600, 800, 300],
        backgroundColor: ['#8e24aa','#43a047','#1e88e5','#fb8c00','#6a1b9a']
      }]
    },
    options: { responsive: true, scales: { y: { beginAtZero: true } } }
  });

  // 2. GPA Averages by Program (Line)
  new Chart(document.getElementById('gpaChart'), {
    type: 'line',
    data: {
      labels: ['BSc Biology','BEng Civil','BA History','BBA Management','LLB'],
      datasets: [{
        label: 'Average GPA',
        data: [3.2, 2.9, 3.5, 3.1, 3.4],
        fill: false,
        tension: 0.1,
        borderColor: '#43a047',
        pointBackgroundColor: '#43a047'
      }]
    },
    options: { responsive: true, scales: { y: { suggestedMin: 0, suggestedMax: 4 } } }
  });

  // 3. Scholarships Awarded Over Years (Pie)
  new Chart(document.getElementById('scholarshipChart'), {
    type: 'pie',
    data: {
      labels: ['2019','2020','2021','2022','2023'],
      datasets: [{
        data: [45, 60, 55, 70, 65],
        backgroundColor: ['#1e88e5','#fb8c00','#8e24aa','#43a047','#6a1b9a']
      }]
    },
    options: { responsive: true }
  });
</script>
{% endblock %}
